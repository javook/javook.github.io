# 28- پایگاه داده جاوا JDBC


## وظایف JDBC 


به ترتیب شامل موارد زیر می شود :


**ارتباط با پورت(Port) – کانکت شدن به دیتابیس- ایجاد دستورات(Query) و بستن پورت (Port) بعد از پایان کار با دیتابیس** می باشد. برای کار با JDBC ابتدا باید **فایل با پسوند jar** آنرا دانلود سپس در پوشه اصلی مربوط به هر پروژه اضافه کنیم و در مرحله بعد, از نصب **mysql** در سیستم عامل اطمینان حاصل شود که بعنوان مثال در **سیستم عامل لینوکس و بخش Terminal** آن دستور زیر مربوط به **اتصال به دیتابیس** را وارد کرده تا **وجود mysql** بررسی گردد.
 Mysql -u root -p

چنانچه پیام عدم نصب mysql در ترمینال مشاهده شد, با وارد کردن دستورات زیر, سیستم عامل اقدام به دانلود و نصب خودکار آن می کند.

Sudo su
yum install mariadb mysql-server


## آدرس JDBC-URL 


برای **پیکربندی(Config) JDBC** جهت اتصال به دیتابیس بوده که مشخصاتی از قبیل **آدرس دیتابیس و دیگر پارامترهای مهم مانند نام کاربری, رمز عبور, استاندارد زبان (مثل UTF8),اجازه یا عدم اجازه استفاده از برخیQuery ها یا Function ها و غیره** را شامل می شود.

JDBC:mysql=//localhost:3306/book ? Username : ‘ali9808’ Password : ‘ade248t9’

در URL بالا منظور از **localhost:3306 , استفاده از کامپیوتر فعلی** برای ارتباط با دیتابیس است که در این صورت JDBC و  mysql در این سیستم نصب می باشند. ولی اگر **ماشین مجازی** برای ارتباط با پایگاه داده بکار رود باید **آدرس ip** آنرا با وارد کردن **دستور  ip a در ترمینال** لینوکس یافته سپس **جایگزین  localhost:3306 در آدرس URL** شود. در مواقعی که از **فضای اینترنتی(Host)** جهت برقراری ارتباط با دیتابیس استفاده شود باید **آدرس دامنه(Domain)** در بخش آدرس URL قرار گیرد.


##  ایجاد حساب کاربری Create User 


برای ایجاد یک **حساب کاربری جهت کار با دیتابیس و مدیریت دسترسی آن به Query** از نمونه دستورات زیر استفاده می شود :

Use database-name
Create User 'username' @ 'localhost' identified by 'password' ;
**grant** select, insert, update, delete, create, drop, references, 
execute on *.* to 'username' @ 'localhost' ;


## کلاس های واسط کاربردی کار با دیتابیس 


  کلاس  **Connection**: واسطی برای **مدیریت برقراری ارتباط با دیتابیس** می باشد که با استفاده از واسط **Driver manager** که **اطلاعات ارتباط پایگاه داده** را ذخیره دارد, مشخصات مربوط به **ارتباط و اتصال به دیتابیس** را دریافت می کند.

 واسط **Statement** : برای **مدیریت و اجرای کلاس Query ها** در زبان sql پس از ارتباط با پایگاه داده می باشد. برای این امر ابتدا باید متغیری از آن ایجاد و با استفاده از متغیر کلاس Connection که مشخصات ارتباط به دیتابیس را در خود دارد, برای برقراری ارتباط و ایجاد Statement اقدام کرد.

انواع Statement عبارتند از: **PreparedStatement** که کار با Queryها را تسهیل می کند بدین صورت که ابتدا **مجموعه ای ازQuery ها** را دریافت کرده که در ادامه برنامه برای بکارگیری آنها, نیاز به درج کامل کدهای Query نمی باشد بلکه **ذکر پارامترهای هر Query** کفایت می کند.

 نوع بعدی Statement ها, **Callable Statement** ها هستند که برای فراخوانی و **اجرای رویه های ذخیره شده (Stored procidure)** در دیتابیس کاربرد دارد.

واسط **ResultSet** : جهت **ذخیره داده های جداول** در پایگاه داده می باشد که بوسیله متغیری از واسط Statement دستورات را اجرا یا execute Query می کند.این واسط نوع دیگری به نام **ResultSetMetaData** دارد که از طریق آن می توان اطلاعاتی از **قبیل شماره , نام و نوع های هر ستون جدول** را بوسیله آبجکتی از آن حتی در سایر واسط ها مانند **RowSet** بوسیله متغیری از آن دریافت کرد.

      rowSet.getObject( i )

 واسط **RowSet** : جهت **تنظیم Set یا دریافت get** نمودن داده ها از**جداول بانک اطلاعاتی** و همزمان **دریافت پارامترهای اتصال به بانک** برای برقراری ارتباط می باشد.




